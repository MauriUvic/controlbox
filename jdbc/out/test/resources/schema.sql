CREATE DATABASE IF NOT EXISTS controlbox_test;
USE controlbox_test;

CREATE TABLE IF NOT EXISTS PRODUCTS (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(255) NOT NULL,
    DESCRIPTION TEXT,
    PRICE DOUBLE,
    STOCK INT
);

CREATE TABLE IF NOT EXISTS SUPPLIERS (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(255) NOT NULL,
    CONTACT_NAME VARCHAR(255),
    EMAIL VARCHAR(255),
    PHONE VARCHAR(20),
    ADDRESS TEXT,
    TAX_ID VARCHAR(50)
);

CREATE TABLE IF NOT EXISTS REQUESTS (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    PRODUCT_ID BIGINT,
    QUANTITY INT,
    STATUS VARCHAR(50),
    REQUEST_DATE VARCHAR(20),
    RESOLUTION_DATE VARCHAR(20),
    REQUESTER VARCHAR(255),
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(ID)
);

CREATE TABLE IF NOT EXISTS MOVEMENTS (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    PRODUCT_ID BIGINT,
    TYPE VARCHAR(50),
    QUANTITY INT,
    DATE VARCHAR(20),
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(ID)
);

CREATE TABLE IF NOT EXISTS ORDERS (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    SUPPLIER_ID BIGINT,
    DATE VARCHAR(20),
    TOTAL_AMOUNT DOUBLE,
    STATUS VARCHAR(50),
    DELIVERY_DATE VARCHAR(20),
    FOREIGN KEY (SUPPLIER_ID) REFERENCES SUPPLIERS(ID)
);

CREATE TABLE IF NOT EXISTS ORDER_DETAILS (
    ID BIGINT PRIMARY KEY AUTO_INCREMENT,
    ORDER_ID BIGINT,
    PRODUCT_ID BIGINT,
    QUANTITY INT,
    UNIT_PRICE DOUBLE,
    FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ID),
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(ID)
);
